---
title: 'Recommender Systems - Project #3'
author: "J. Hamski, V. Nguy"
date: "June 28, 2016"
output: html_document
---


```{r, warning=FALSE, message=FALSE, cache=TRUE}
require(shiny)
require(dplyr)
require(ggplot2)
require(tidyr)
require(knitr)
#require(Matrix)
require(recommenderlab)
```

Reading in needed datasets. Artist information will be joined to user-artist dataset for readability
```{r Read_Dataset, cache=TRUE, warnings = FALSE}
user.artists.pairwise <- read.delim('hetrec2011-lastfm-2k/user_artists.dat', sep="\t")

artists <- read.delim('hetrec2011-lastfm-2k/artists.dat', sep="\t") %>%
  select(id, name)
```

#Data Preparation

Converting from Artist IDs to Artist Names for easier interpretation.
```{r join_artist_name, cache=TRUE}
colnames(artists) <- c("artistID", "name")

#note: one duplicate artist
#artists$name[duplicated(artists$name)==TRUE]
user.artists.pairwise <- inner_join(user.artists.pairwise, artists, by="artistID")

user.artists.pairwise <- select(user.artists.pairwise, -artistID)

user.artists.pairwise$name <- strtrim(user.artists.pairwise$name, 100)

user.artists.pairwise[16060,]$name <- NA

#ggplot(user.artists.pairwise, aes(x = weight)) + geom_density() + theme_bw() + scale_x_log10()
```

```{r, cache=TRUE}
num_listens = 1000

user.artists.matrix <- user.artists.pairwise %>%
  filter(weight > num_listens) %>% #filter artists with less than num_listens listens
  spread(key = name, value = weight) %>%
  as.matrix()

user.artists <- user.artists.matrix[,-1]
dim(user.artists)
```

Built-in SVD
```{r}
svd <- svd(user.artists.matrix)
```

